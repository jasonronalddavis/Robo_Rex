[env:adafruit_feather_esp32s3]
platform = espressif32
board = freenove_esp32_s3_wroom
framework = arduino

; Upload/Monitor
upload_protocol = esptool
upload_speed    = 115200
board_upload.use_1200bps_touch = no
monitor_speed = 115200

; Build flags:
; - Dual I2C bus configuration for stability
; - Wire  (GPIO 8/9):  PCA9685 servos at 100kHz
; - Wire1 (GPIO 19/20): MPU6050 IMU at 400kHz
; - Enable optional IMU_DEBUG for detailed logging
build_flags =
  -DIMU_SENSOR_MPU6050
  -DIMU_SDA_PIN=19
  -DIMU_SCL_PIN=20
  -DSERVO_SDA_PIN=8
  -DSERVO_SCL_PIN=9
  -DIMU_DEBUG

; Flash settings (stable defaults)
board_build.flash_mode = dio
board_build.f_flash    = 80000000L

; Libraries
lib_deps =
  h2zero/NimBLE-Arduino@^1.4.3
  bblanchon/ArduinoJson@^6.21.3
  adafruit/Adafruit PWM Servo Driver Library@^3.0.1
  adafruit/Adafruit BusIO@^1.15.0
  https://github.com/Xander-Electronics/Base64.git
  adafruit/Adafruit MPU6050@^2.2.5
  https://github.com/arduino-libraries/MadgwickAHRS.git